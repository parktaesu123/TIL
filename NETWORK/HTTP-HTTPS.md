## HTTP / HTTPS

<aside>

**💡 HTTP(Hyper Text Transfer Protocol)**

</aside>

- 클라이언트와 서버 간 통신을 위한 프로토콜이다.
- 모든 프로그램이 이 규약에 맞춰 개발해서 서로 정보를 교환할 수 있게 되었다.

> **프로토콜(protocol)?**
> 
- 프로토콜은 기본적으로 컴퓨터나 네트워크 장치들이 서로 통신할 때 따르는 규칙이다.
- 사람들이 서로 다른 언어를 사용한다면 의사소통이 어려워진다. → 컴퓨터들도 서로 이해할 수 있는 **공통의 언어**, **`프로토콜`**이 필요하다.

<aside>

**예** : HTTP, HTTPS, TCP, UDP, IP등등

</aside>

### HTTP 동작 🧐

> 클라이언트가 브라우저를 통해서 어떠한 서비스를 url을 통하거나 다른 것을 통해서 **`요청(request)`**을 하면 서버에서는 해당 요청사항에 맞는 결과를 찾아서 사용자에게 **`응답(response)`**하는 형태로 동작한다.
> 

<aside>

클라이언트 프로그램에서 사용자가 회원가입을 시도하게 되면, 서버로 회원정보를 보내게 되고 서버는 회원 정보를 저장해주기도 한다. 이 과정에서 **클라이언트와 서버 간의 교류가 HTTP라는 규약을 이용하여 발생하게 된다.**

</aside>

### HTTP응답 코드 🫣

> **서버와 통신이** 잘 되었는지 아니면 문제가 생겼다는 것을 알기 위해서 상황에 따라서 코드를 지정해 놓았습니다.
> 

### HTTP 메소드 🤭

> 서버에서 클라이언트의 요청이 무엇을 원하는지, 어떤 행동을 해서 어떤 정보를 넘겨 주어야 하는지 알아야 합니다. →**`메소드`** 라는 미리 지정 해놓은 단어를 이용해서 서버에 요청을 보냄
> 

### HTTP 요청 🖖

> HTTP 요청은 3 파트로 나눌 수 있습니다.
> 
> 
> `시작줄`, `헤더`, `바디`
> 

```sql
GET https://velog.io/@surim014 HTTP/1.1								// 시작줄
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) ...			  // 헤더
Upgrade-Insecure-Requests: 1
```

**시작줄:**

- 요청라인
    - 요청에는 `메소드`와 `URL` 그리고 `HTTP 버전` 이 담겨있다.
    - 응답에는 `HTTP 버전`, `상태 코드`, `응답 이유` 가 담겨있다.
    

<aside>

GET : HTTP Method

https://velog.io/@troy96475: 사이트 주소

HTTP/1.1 : HTTP 버전

</aside>

**헤더:**

- **요청에 대한 정보**를 담고 있다.
- User-Agent, Upgrade-Insecure-Requests등등

**바디:**

- **요청을 할 때 함께 보낼 데이터**를 담는 부분이다.

# HTTPS란?

---

<aside>

💡 **HTTPS(Hypertext Transfer Protocol Secure)**

</aside>

- HTTP와 거의 동일하지만, 데이터를 주고 받는 과정에 ‘보안’ 요소가 추가되었다는 것이 가장 큰 차이점이다. HTTPS를 사용하면 **서버와 클라이언트 사이의 모든 통신 내용이 암호화**된다.

<aside>

우리가 특정 파일에 암호를 걸 때처럼 어떤 **키**를 설정해서 잠금을 걸고, 풀 때에도 그것을 입력해서 푸는 것을 생각해보자. 간단하게 생각하면 **웹 서버**가 **키** 하나를 정해 페이지를 **암호화**해서 사용자의 웹 브라우저로 보내고, 웹 브라우저는 그 **키**를 이용해서 페이지를 복원하면 될 것이다. 그러나 **웹 서버**는 하나고 사용자는 불특정 다수이기 때문에 간단하지 않다. 그렇다고 ~~키를 사용자들에게 막 줘버리면 아무나 암호화를 풀 수 있게 됨으로써 암호화의 의미가 없게 된다.~~

**`HTTPS`는 위와 같은 상황에서 페이지를 암호화한 키가 그 페이지를 보는 특정 사용자에게만 알려지도록 한다.** **`HTTPS`**는 SSL이나 TLS 프로토콜을 통해 세션 데이터를 암호화하며, 기본 TCP/IP 포트는 443이고, SSL 프로토콜 위에서 **`HTTPS 프로토콜`**이 동작한다.

</aside>

## 암호화 방식

---

<aside>

💡 **공개키 암호화 방식**과 공개키의 느리다는 단점을 보완한 **대칭키 암호화 방식**을 함께 사용

</aside>

- 공개키 방식으로 대칭키를 전달하고, **서로 공유된 대칭키**를 가지고 통신하게 된다.

### 대칭키 방식

> `대칭키 암호화 방식`은 암호화, 복호화할 때 **동일한 키**가 사용되는 방식
> 
- **대칭키**는 매번 랜덤으로 생성되어 누출되어도 다음에 사용할 때는 다른 키가 사용되기 때문에 안전하다.
- 공개 키보다 빠르게 통신할 수 있다.

**문제점**

<aside>

`대칭키 암호화 방식`을 사용하기 위해서, 한쪽에서 다른 한쪽으로 대칭키를 전송하는 과정이 필요하다. → 이 과정에서 대칭키 자체가 제 3자에게 도난당할 위험성이 존재한다.
아무리 메시지를 암호화한들 **대칭키**를 도난당하게 된다면, 해커는 손쉽게 메시지를 복호화할 수 있으므로 ~~암호화가 무용지물이 될 것이다.~~

</aside>

### 공개 키 방식

> `공개키(비대칭키) 암호화 방식`은 **서로 다른 키**로 암호화와 복호화를 수행하는 암호화 방식이다.
> 
- `공개키 암호화 방식`은 2개의 비대칭키를 관리한다.
    - 하나는 공개를 하고, 다른 하나는 서버에서만 관리한다. → 여기서 공개하는 키는 `공개키`라고 하고, 비밀로 관리하는 키는 `개인키(비밀키)` 라고 한다.
- 대칭키에 비해 느리다.

<aside>

개인키는 자신만 가지고 있고 공개되지 않는다. 공개키는 타인에게 제공한다. 공개키는 유출이 되어도 개인키를 모르면 복호화 할 수 없기 때문에 안전하다.

</aside>

## 동작 과정

---

(서버 = 사이트, 클라이언트 = 사용자)

1. 인터넷 사이트(서버)는 공개키와 개인키를 만들고, 인증 기관(CA)에 자신의 정보와 공개키를 관리해달라고 계약한다.
2. 계약을 완료한 인증 기관은 기관만의 공개키와 개인키가 있다. 인증 기관은 사이트가 제출된 데이터를 검증하고, 인증 기관의 개인키로 사이트에서 제출한 정보를 암호화해서 **인증서**를 만들어 제공한다. 비로소 사이트는 **인증서**를 가지게 되었다.
3. 인증 기관은 웹 브라우저에게 자신의 공개키를 제공한다.


1. 사용자가 사이트에 접속하면 서버는 자신의 **인증서**를 웹 브라우저(클라이언트)에게 보낸다. 예를 들어, 웹 브라우저가 karina.html 파일을 달라고 요청했다면, 서버의 정보를 인증 기관의 개인키로 암호화한 **인증서**를 받게 되는 것이다.
2. 웹 브라우저는 3.에서 미리 알고 있던 인증기관의 공개키로 **인증서**를 해독하여 검증한다. 그러면 사이트의 정보와 서버의 공개키를 알 수 있게 된다. (*이 부분은 보안상의 의미는 없다. 단지 해당 서버로부터 온 응답임을 확신할 수 있게 된다.)*
3. 이렇게 얻은 서버의 공개키로 대칭키를 암호화해서 다시 사이트에 보낸다.
4. 사이트는 개인키로 암호문을 해독하여 대칭키를 얻게 되고, 이제 대칭키로 데이터를 주고받을 수 있게 된다.


<aside>

웹 브라우저는 모든 주요 인증 기관의 공개 키와 함께 설치됩니다. 이 공개 키를 사용하여 웹 서버의 인증서가 실제로 신뢰할 수있는 인증 기관에 의해 서명되었는지 확인합니다.

웹 브라우저는 내부적으로 CA 리스트와 함께 공개키가 포함된 인증서를 가지고 있다.

</aside>

### 참고자료

https://aws.amazon.com/ko/compare/the-difference-between-https-and-http/

https://velog.io/@blessoms2017/%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C%EC%9D%B4%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80-%EA%B8%B0%EC%B4%88%EB%B6%80%ED%84%B0-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0

https://velog.io/@surim014/HTTP%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80

https://velog.io/@entrydsm/%EB%82%B4%EA%B0%80-%EC%95%8C%EB%8D%98-HTTP%EA%B0%80-%EB%A7%9E%EB%83%90

https://rachel-kwak.github.io/2021/03/08/HTTPS.html

https://www.cloudflare.com/ko-kr/learning/ssl/what-is-https/

https://velog.io/@ddangle/HTTPS%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%95%94%ED%98%B8%ED%99%94%ED%95%98%EB%8A%94%EA%B0%80

https://www.stevenjlee.net/2020/11/01/%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0-http-vs-https-%EA%B7%B8%EB%A6%AC%EA%B3%A0-ssl-secure-socket-layer/
